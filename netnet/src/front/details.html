<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Picture Details - Netnet</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="header-container"></div>
    <main>
        <a href="home.html" class="back-link">← Retour à la page d'accueil</a>
        <div class="details-container">
            <div class="details-movie">
                <img id="detailMovie" src="image1.png" alt="Movie details">
            </div>
            <div class="details-info">
                <h2 id="detailTitle">Movie Title</h2>
                <p><span id="detailName">image1.png</span></p>
                
                <div class="detail-field">
                    <label>Date de publication</label>
                    <p id="publishedAtInfo">-</p>
                </div>
                
                <div class="detail-field">
                    <label>Synopsis</label>
                    <p id="synopsisInfo">No synopsis available.</p>
                </div>
                
                <!--<div class="detail-field">
                    <label>Trailer</label>
                    <p id="trailerInfo">-</p>-->
                </div>
            </div>
        </div>
    </main>
    <footer>
    </footer>
    <script>
        // Load header from separate file
        async function loadHeader() {
            try {
                const response = await fetch('/header.html');
                const headerHTML = await response.text();
                document.getElementById('header-container').innerHTML = headerHTML;
            } catch (error) {
                console.error('Error loading header:', error);
            }
        }
        
        // Récupération de l'ID du film
        const params = new URLSearchParams(window.location.search);
        const filmId = params.get('id');

        // Fonction async pour modifier les données avec celles récupérées dans la BDD
        async function loadFilmDetails() {
            if (!filmId) {
                console.error('No film ID provided');
                return;
            }
            
            try {
                const response = await fetch(`/api/films/${filmId}`);
                if (!response.ok) {
                    throw new Error('Film not found');
                }
                const film = await response.json();
                
                // Mise à jour de la partie html
                document.getElementById('detailMovie').src = film.thumbnailUrl;
                document.getElementById('detailMovie').alt = film.title;
                document.getElementById('detailTitle').textContent = film.title;
                document.getElementById('detailName').textContent = film.title;
                document.getElementById('synopsisInfo').textContent = film.synopsis || 'No synopsis available.';
                document.getElementById('publishedAtInfo').textContent = new Date(film.publishedAt).toLocaleDateString() || '-';
            } catch (error) {
                console.error('Error loading film details:', error);
                document.getElementById('detailTitle').textContent = 'Film not found';
            }
        }
        
        // Chargement de la fonction async
        document.addEventListener('DOMContentLoaded', () => {
            loadHeader();
            loadFilmDetails();
        });
    </script>
</body>
</html>
